<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Project1</title>
</head>

<body>

    <!-- //Forms for user input 'done'-->
    <!-- //things we need to complete need to be able tro save to local storage  -->
    <!-- //search button needs to be set up with on click listener and doesn't refresh page -->
    <!-- //load api's to html -->
  

    <br>
    <form id="Activities">
        Search For Activities and Weather By City:<br>
        <input id="attraction" type="text">


        <button class="Activities">Search</button>
    </form>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        //Weather Search button listener

        $("#CityWeather").on("submit", function (event) {
            //console.log(event)
  
        });

        $("#Activities").on("submit", function (active) {
            console.log(active)
            active.preventDefault();
            let city = $("#attraction").val();
            console.log(city)
            let queryURL1 = "https://app.ticketmaster.com/discovery/v2/events?apikey=7elxdku9GGG5k8j0Xm8KWdANDgecHMV0&city=*" + city;


            // this code sends our ajax requests and sets our promise
            $.ajax({
                url: queryURL1,
                method: "GET"
            }).then(function (response) {
                console.log(response);
                // this line is creating a DIV variable
                let activityDiv = $("<div>");
                // let p = $("<p>").text("Attractions:" + response._embedded.events[0].name);
                //let p2 = $("<p>").text(response._embedded.events[0].url);
                for (i = 0; i < 15; i++) {

                    let p = $("<p>").text("Attractions:" + response._embedded.events[i].name);
                    let p2 = $("<p>").text(response._embedded.events[i].url);
                    activityDiv.append(p);
                    activityDiv.append(p2);
                }

                $("body").append(activityDiv);
            }

            )


            // callinfg weather
            let APIKey = "27c1cb8e958edefa8e76e521738fbd32";
            let queryURL = "https://api.openweathermap.org/data/2.5/forecast?q=" + city + "&appid=" + APIKey + "&units=imperial";

            //console.log(response)
            // this code sends our ajax requests and sets our promise
            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                console.log(response);
                // this line is creating a DIV variable
                let weatherDiv = $("<div>");
                let p = $("<p>").text("Temperature: " + response.list[0].main.temp);

                weatherDiv.append(p);
                $("body").append(weatherDiv);
            }

            )
        });




    </script>

</body>

</html>